var shares=null;var Intent=null,File=null,Uri=null,main=null;function sharePlate(){if(plus.os.name=="Android"){main=plus.android.runtimeMainActivity();Intent=plus.android.importClass("android.content.Intent");File=plus.android.importClass("java.io.File");Uri=plus.android.importClass("android.net.Uri")}plus.share.getServices(function(n){shares={};for(var e in n){var s=n[e];shares[s.id]=s}console.log("获取分享服务列表成功")},function(n){console.log("获取分享服务列表失败："+n.message)})}function shareAction(n,e,s){console.log(n+"------------"+typeof n);plus.nativeUI.showWaiting("正在分享");var i=null;if(!n||!(i=shares[n])){mui.toast("无效的分享服务！");return}if(i.authenticated){console.log("---已授权---");shareMessage(i,e,s)}else{console.log("---未授权---");i.authorize(function(){shareMessage(i,e,s)},function(n){plus.nativeUI.closeWaiting();mui.toast("认证授权失败")})}}function shareMessage(n,e,s){var i={content:s,href:"",extra:{scene:e}};n.send(i,function(){plus.nativeUI.closeWaiting();mui.toast("分享成功!")},function(n){plus.nativeUI.closeWaiting();mui.toast("分享失败!");alert(n.message)})}